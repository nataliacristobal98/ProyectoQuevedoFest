## 5-Consultas de la base de datos
### 5.4-Consultas con subconsultas


##### Sin JOINS
#### 1. Nombre de los artistas que presentarán el festival

```sql
SELECT nombre, id_artistas
FROM  artistas
WHERE id_artistas IN (
        SELECT id_artistas FROM presentador);
```
Resultado:
```
      nombre      | id_artistas
------------------+-------------
 Samantha Hudson  |           1
 Supremme de Luxe |           2
 Ger              |           3
(3 rows)
```

#### 2. Mostrar los datos del diseñador que realiza en cartel para el día 3

```sql
SELECT *
FROM  diseñador
WHERE id_diseñador IN (
        SELECT id_diseñador FROM cartel
        WHERE fecha = '2021-07-8');
```
Resultado:
```
 id_diseñador |   nombre    |  red_social
--------------+-------------+---------------
            3 | Lith Galera | @lilithgalera
(1 row)
```

#### 3. Mostrar los datos del horario que corresponde a la agenda donde está previsto que haya 4 charlas

```sql
SELECT fecha, hora, descripcion_evento
FROM  horario
WHERE id_agenda IN (
        SELECT id_agenda FROM agenda
        WHERE prevision_dia LIKE '%4 charlas%');
```
Resultado:
```
   fecha    |  hora   |   descripcion_evento
------------+---------+-------------------------
 2021-07-07 | 09:00AM | Charla "Tóxicas"
 2021-07-07 | 13:00PM | Charla "Series Míticas"
 2021-07-07 | 20:00PM | Concierto Jackson Wang"
(3 rows)
```

#### 4. Muestra solo el nombre de las celebridades que trabajen como actores o actrices

```sql
SELECT SPLIT_PART(nombre, ' ', 1) "Celebridad"
FROM  celebridades
WHERE id_celebridad IN (
        SELECT id_celebridad FROM actor_actriz);
```
Resultado:
```
 Celebridad
------------
 Miguel
 Zendaya
 Barbie
 Anya
(4 rows)
```

#### 5. Muestra los datos de las celebridades que trabajan en el mundo del espectaculo

```sql
SELECT *
FROM  celebridades
WHERE id_celebridad IN (
        SELECT id_celebridad FROM campo_trabajo
        WHERE campo_trabajo = 'Espectaculo');
```
Resultado:
```
 id_celebridad |     nombre
---------------+-----------------
             7 | Plastique Tiara
(1 row)
```

#### 6. Las invitaciones que tienen las celebridades que son youtubers y que no asisten en el segundo día del festival

```sql
SELECT id_invitacion, codigo_QR, fecha
FROM  invitacion
WHERE id_celebridad IN (
        SELECT id_celebridad FROM campo_trabajo
        WHERE campo_trabajo = 'Youtube')
     AND fecha != '2021-07-07'
     ORDER BY fecha;
```
Resultado:
```
 id_invitacion |  codigo_qr  |   fecha
---------------+-------------+------------
             5 | QW244375CLP | 2021-07-06
             8 | DE44534567G | 2021-07-06
             6 | QE24BD45CO3 | 2021-07-08
(3 rows)
```

#### 7. Los cantantes que pertenecen a la agencia de Big Creators

```sql
SELECT id_artistas, nombre, agencia
FROM  artistas
WHERE id_artistas IN (
        SELECT id_artistas FROM cantante
        WHERE agencia = 'Big Creators');
```
Resultado:
```
 id_artistas |   nombre   |   agencia
-------------+------------+--------------
          35 | Stray Kids | Big Creators
          42 | ITZY       | Big Creators
(2 rows)
```

#### 8. Los speakers que aparecen en el cartel con un presupuesto menor a 400€

```sql
SELECT id_artistas, nombre, agencia, id_cartel
FROM  artistas
WHERE id_cartel IN (
        SELECT id_cartel FROM cartel
        WHERE presupuesto<400)
AND id_artistas IN (
        SELECT id_artistas FROM speaker);
```
Resultado:
```
 id_artistas |         nombre         |     agencia     | id_cartel
-------------+------------------------+-----------------+-----------
           4 | Carolina Iglesias      | NeoAttack       |         1
           5 | Victoria Martín        | NeoAttack       |         1
           6 | MimiXXL                | Zenith          |         1
           7 | Uy Albert              | Action Catalyst |         1
           8 | Fizpireta              | NeoAttack       |         1
           9 | Andrea Compton         | StartUp         |         1
          10 | Berry                  | PS Management   |         1
          19 | Rodrigo Cortes         | StartUp         |         3
          20 | Javier Cansado         | NeoAttack       |         3
          21 | Juan Gómez-Jurado      | Zenith          |         3
          22 | Arturo González-Campos | NeoAttack       |         3
(11 rows)
```

#### 9. Cuantos cantantes hay por agencia que el género musical no sea pop

```sql
SELECT COUNT(*) as "Total cantantes", agencia
FROM  artistas
WHERE id_artistas IN (
        SELECT id_artistas FROM cantante
        WHERE genero_musical NOT LIKE 'Pop%')
GROUP BY agencia;
```
Resultado:
```
 Total cantantes |     agencia
-----------------+-----------------
               2 | NeoAttack
               2 | Big Creators
               2 | StartUp
               1 | Diferenza Music
               5 | LatMusic
               3 | PUF
(6 rows)
```

#### 10. Cuantos cantantes hay que formen parte de un grupo que tenga como color oficial el naranja o el rojo

```sql
SELECT COUNT(*) as "Total grupos", color_oficial
FROM  cantante
WHERE id_cantante IN (
        SELECT id_cantante FROM grupo)
AND color_oficial = 'Naranja' OR color_oficial = 'Rojo'
GROUP BY color_oficial;
```
Resultado:
```
 Total grupos | color_oficial
--------------+---------------
            2 | Naranja
            3 | Rojo
(2 rows)
```

##### Con JOINS
#### 1.